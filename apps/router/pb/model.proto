syntax = "proto3";

package K8sGenie.router;

option go_package = "gitee.com/qiaogy91/K8sGenie/apps/router";

message Meta {
    int64 id = 1;
    // @gotags: gorm:"autoCreateTime"
    int64 created_at = 2;
    // @gotags: gorm:"autoUpdateTime"
    int64 updated_at = 3;
}

/*
告警信息包含关键字：robot_name/cluster_name、namespace_name，根据这两个关键字，可以唯一定位一个 Project，进而查询到该项目对应的告警 endpoint
告警信息只有关键字：robot_name/cluster_name ，则说明是集群级别的监控，直接查表得到对应的 endpoint
*/
message Spec {
    // @gotags: validate:"required"
    string cluster_name = 1;
    // @gotags: validate:"required" gorm:"unique"
    string project_id = 2;
    // @gotags: validate:"required"
    string webhook_url = 3;
    // @gotags: validate:"required"
    string webhook_token = 4;
}

message Router {
    // @gotags: json:"meta" gorm:"embedded"
    Meta meta = 1;
    // @gotags: json:"spec" gorm:"embedded"
    Spec spec = 2;
}

message RouterSet {
    int64 total = 1;
    repeated Router items = 2;
}